pipeline {
    agent {label 'jenkins-slave'}
    
    stages {
        stage('build') {
            steps {
                sh 'python3 add-build-num.py ${BUILD_NUMBER}'
                sh 'tar -czvf hello-${BUILD_NUMBER}.tar.gz application.py requirements.txt'
            }
        }
        stage('post-build') {
           node('Built-In Node') {
           steps {
              archiveArtifacts(artifacts: '*.tar.gz', onlyIfSuccessful: true)
            }
         }
      }
   }
}
